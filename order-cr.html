<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Order - Poizone Classic - Red</title>
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* ... your styles, unchanged ... */
    /* ... omitted for brevity ... */
  </style>
  <!-- EMAILJS SDK -->
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    (function(){
      // Use your real public key!
      emailjs.init('public_6JhW8EVSKuBERKhqk');
    })();
  </script>
</head>
<body>
<center>
  <div class="titleimg"><a href="http://poiz.one"><img src="pws.png" width="350px" alt="POIZ.ONE"></a></div>
  <div class="scroll-tile-bar" id="scrollTileBar"><span style="font-size:0;position:absolute;left:-9999px;" aria-hidden="true">tile-scroll-bar</span>
    <div class="tile-content" id="tileContent"><span class="tile-text editable-text" id="tileEditable" contenteditable="true">POIZ.ONE PAINT - LAST UPDATED 28 MAY 2025 - v2.0 // POIZ.ONE DOMAIN PARKED - LAST UPDATED 29 MAY 2025</span></div>
  </div>
  <div class="nav-links"><a href="https://poiz.one/paint">PAINT</a><a href="https://poiz.one/domainparked">PARK</a><a href="https://poiz.one/edex">EDEX</a><a href="https://instagram.com/poiz.0ne">CONTACT</a></div>
</center>
<div class="order-section">
  <div class="order-img"><img src="product-red.png" alt="Poizone Classic Hoodie"></div>
  <div class="order-form-wrap">
    <h2>Order: POIZONE CLASSIC - RED</h2>
    <form id="orderForm" autocomplete="off" onsubmit="return false;">
      <label>Size</label>
      <select name="order_size" id="mainSize" required>
        <option>S</option><option>M</option><option>L</option><option>XL</option><option>XXL</option><option>XXXL</option>
      </select>
      <label>Full Name</label>
      <input type="text" name="order_name" id="fullName" required>
      <label>Social Media</label>
      <input type="text" name="order_social">
      <label>Street Address</label>
      <div class="inline-group" style="gap: 12px; margin-bottom:0;">
        <input type="text" name="order_street_no" id="streetNo" placeholder="No." style="max-width:70px;flex:0 0 70px;" required>
        <input type="text" name="order_street_name" id="streetName" placeholder="Street Name" style="flex:1;" required>
        <select name="order_country" id="country" required style="max-width:90px;flex:0 0 90px;margin-top:0;"></select>
      </div>
      <div class="inline-group" style="gap: 12px; margin-top:0.5em;">
        <input type="text" name="order_suburb" id="suburb" placeholder="Suburb" style="flex:1;" required>
        <input type="text" name="order_state" id="state" placeholder="State" style="flex:1;" required>
        <input type="text" name="order_postcode" id="postcode" placeholder="Postcode" style="flex:1;" required>
      </div>
      <label>Email</label>
      <input type="email" name="order_email" id="email" required>
      <label>Phone Number</label>
      <input type="text" name="order_phone" required>
      <div class="checkbox"><input type="checkbox" id="addMore" onchange="toggleExtras()"> - add more items</div>
      <div id="extras" style="display:none;">
        <label>Additional Product</label>
        <select id="extraProduct" onchange="showCount()">
          <option value="">Select</option>
          <option value="Poizone Classic Hood - Grey">Poizone Classic Hood - Grey</option>
          <option value="Poizone Classic Hood - Blue">Poizone Classic Hood - Blue</option>
          <option value="Poizone Classic Hood - Red">Poizone Classic Hood - Red</option>
        </select>
        <div class="inline-group" style="margin-top: 0.7em;">
          <select id="extraSize">
            <option value="">Size</option><option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">XL</option><option value="XXL">XXL</option><option value="XXXL">3XL</option>
          </select>
          <input type="number" id="extraCount" value="1" min="1" style="max-width:70px;">
          <button type="button" id="addItemBtn">Add</button>
        </div>
      </div>
      <div class="added-items" id="itemList"></div>
      <div class="price-box" id="priceBox">$65<span class="usd">usd</span></div>
      <button type="button" class="submit-btn" id="paypalBtn" style="margin-left:1em;opacity:0.7;pointer-events:none;background:#181818;color:#444;">Confirm Purchase (PayPal)</button>
      <input type="hidden" name="extra_items" id="extraItemsField" value="">
      <input type="hidden" name="cost_total" id="orderTotalField" value="">
      <input type="hidden" name="cost_shipping" id="orderShippingField" value="">
      <!-- You may want to generate order_id in JS and add here too if you want it unique -->
      <input type="hidden" name="order_id" id="orderIdField" value="">
    </form>
  </div>
</div>
<div class="footer"><a href="https://instagram.com/poiz.0ne" target="_blank">@poiz.0ne</a></div>
<script>
const countries=[["ðŸ‡¦ðŸ‡º","AUS","Australia"],["ðŸ‡ºðŸ‡¸","USA","United States"],["ðŸ‡¬ðŸ‡§","GBR","United Kingdom"],["ðŸ‡¨ðŸ‡¦","CAN","Canada"],["ðŸ‡³ðŸ‡¿","NZL","New Zealand"],["ðŸ‡©ðŸ‡ª","DEU","Germany"],["ðŸ‡«ðŸ‡·","FRA","France"],["ðŸ‡®ðŸ‡¹","ITA","Italy"],["ðŸ‡ªðŸ‡¸","ESP","Spain"],["ðŸ‡¯ðŸ‡µ","JPN","Japan"],["ðŸ‡°ðŸ‡·","KOR","South Korea"],["ðŸ‡¸ðŸ‡¬","SGP","Singapore"],["ðŸ‡¨ðŸ‡³","CHN","China"],["ðŸ‡®ðŸ‡³","IND","India"],["ðŸ‡§ðŸ‡·","BRA","Brazil"],["ðŸ‡¿ðŸ‡¦","ZAF","South Africa"],["ðŸ‡¸ðŸ‡ª","SWE","Sweden"],["ðŸ‡³\u00F8","NOR","Norway"],["ðŸ‡©ðŸ‡°","DNK","Denmark"],["ðŸ‡«\u00ed","FIN","Finland"],["ðŸ‡®\u00ED","IDN","Indonesia"],["ðŸ‡²\u00ED","MYS","Malaysia"],["ðŸ‡µ\u00ED","PHL","Philippines"],["ðŸ‡¹\u00ED","THA","Thailand"],["ðŸ‡»\u00ED","VNM","Vietnam"],["ðŸ‡·\u00ED","RUS","Russia"],["ðŸ‡²\u00ED","MEX","Mexico"],["ðŸ‡¦\u00ED","ARG","Argentina"],["ðŸ‡¹\u00ED","TUR","Turkey"],["ðŸ‡­\u00ED","HKG","Hong Kong"],["ðŸ‡µ\u00ED","POL","Poland"],["ðŸ‡¨\u00ED","CHE","Switzerland"],["ðŸ‡¦\u00ED","AUT","Austria"],["ðŸ‡³\u00ED","NLD","Netherlands"],["ðŸ‡§\u00ED","BEL","Belgium"],["ðŸ‡¬\u00ED","GRC","Greece"],["ðŸ‡­\u00ED","HUN","Hungary"],["ðŸ‡¨\u00ED","CZE","Czechia"],["ðŸ‡¸\u00ED","SVK","Slovakia"],["ðŸ‡¸\u00ED","SVN","Slovenia"],["ðŸ‡µ\u00ED","PRT","Portugal"],["ðŸ‡®\u00ED","IRL","Ireland"],["ðŸ‡®\u00ED","ISR","Israel"],["ðŸ‡¦\u00ED","ARE","UAE"],["ðŸ‡¸\u00ED","SAU","Saudi Arabia"],["ðŸ‡ª\u00ED","EGY","Egypt"],["ðŸ‡²\u00ED","MAR","Morocco"],["ðŸ‡³\u00ED","NGA","Nigeria"],["ðŸ‡°\u00ED","KEN","Kenya"],["ðŸ‡º\u00ED","UKR","Ukraine"],["ðŸ‡·\u00ED","ROU","Romania"],["ðŸ‡§\u00ED","BGR","Bulgaria"],["ðŸ‡·\u00ED","SRB","Serbia"],["ðŸ‡­\u00ED","HRV","Croatia"],["ðŸ‡ª\u00ED","EST","Estonia"],["ðŸ‡±\u00ED","LVA","Latvia"],["ðŸ‡±\u00ED","LTU","Lithuania"],["ðŸ‡°\u00ED","KAZ","Kazakhstan"],["ðŸ‡¸\u00ED","SYR","Syria"],["ðŸ‡¶\u00ED","QAT","Qatar"],["ðŸ‡µ\u00ED","PAK","Pakistan"],["ðŸ‡§\u00ED","BGD","Bangladesh"],["ðŸ‡³\u00ED","NPL","Nepal"],["ðŸ‡±\u00ED","LKA","Sri Lanka"],["ðŸ‡²\u00ED","MMR","Myanmar"],["ðŸ‡»\u00ED","VEN","Venezuela"],["ðŸ‡¨\u00ED","COL","Colombia"],["ðŸ‡¨\u00ED","CHL","Chile"],["ðŸ‡µ\u00ED","PER","Peru"],["ðŸ‡º\u00ED","URY","Uruguay"],["ðŸ‡¨\u00ED","CRI","Costa Rica"],["ðŸ‡µ\u00ED","PAN","Panama"],["ðŸ‡©\u00ED","DOM","Dominican Republic"],["ðŸ‡¨\u00ED","CUB","Cuba"],["ðŸ‡¯\u00ED","JAM","Jamaica"]];
const countrySelect=document.getElementById('country');
countries.forEach(([e,t,n])=>{
  const o=document.createElement('option');
  o.value=t;
  o.innerText=`${e}  ${t}`;
  o.setAttribute('data-country',n);
  countrySelect.appendChild(o);
});
countrySelect.value="AUS";
let basePrice=65,shippingPrice=10;
function updatePrice(){
  const e=countrySelect.value;
  shippingPrice=(e==="AUS")?10:25;
  const t=basePrice+shippingPrice+getAddedItemsPrice();
  document.getElementById('priceBox').innerHTML=`$${t}<span class="usd">usd</span><span style="font-size:1rem;vertical-align:middle;opacity:.7;margin-left:8px;">(${e==="AUS"?"+$10":"+${25}"} shipping)</span>`;
  document.getElementById('paypalBtn').innerHTML=`Confirm Purchase (PayPal) â€” $${t}<span class="usd">usd</span>`;
  document.getElementById('paypalBtn').setAttribute('data-v',btoa(t+"-"+e+"-"+addedItems.map(i=>i.product+i.count+i.size).join("")));
  // update the total for emailjs
  document.getElementById('orderTotalField').value = t;
  document.getElementById('orderShippingField').value = shippingPrice;
}
countrySelect.addEventListener('change',updatePrice);

let addedItems=[];
function toggleExtras(){
  document.getElementById('extras').style.display=document.getElementById('addMore').checked?'block':'none';
}
function showCount(){
  document.getElementById('extraCount').style.display='block';
  document.getElementById('extraSize').style.display='block';
}
function addItem(){
  const p=document.getElementById('extraProduct').value,
        c=document.getElementById('extraCount').value,
        s=document.getElementById('extraSize').value;
  if(p&&c>0&&s){
    addedItems.push({product:p,count:c,size:s});
    renderItems();
    updatePrice();
    updateExtrasField();
  }
}
function getAddedItemsPrice(){
  return addedItems.reduce((s,i)=>s+(65*Number(i.count)),0);
}
function removeItem(i){
  addedItems.splice(i,1);
  renderItems();
  updatePrice();
  updateExtrasField();
}
function renderItems(){
  const l=document.getElementById('itemList');
  l.innerHTML='';
  addedItems.forEach((item,idx)=>{
    const d=document.createElement('div');
    d.className='feedback';
    d.innerHTML=`${item.count} x ${item.product} â€” Size: ${item.size}<button type="button" class="item-remove-btn" onclick="removeItem(${idx})">Remove</button>`;
    l.appendChild(d);
  });
}
function updateExtrasField(){
  let str = "";
  if (addedItems.length) {
    str = addedItems.map(item => `${item.count} x ${item.product} (${item.size})`).join("; ");
  }
  document.getElementById('extraItemsField').value = str;
}
document.getElementById('addItemBtn').addEventListener('click',addItem);

function checkShippingFields(){
  const r=['streetNo','streetName','suburb','state','postcode','country'];
  let f=r.every(id=>{
    const el=document.getElementById(id);
    return el&&el.value&&el.value.trim().length>0;
  });
  const b=document.getElementById('paypalBtn');
  if(f){
    b.style.opacity="1";
    b.style.pointerEvents="auto";
    b.style.background="#84ff00";
    b.style.color="#111";
  }else{
    b.style.opacity="0.7";
    b.style.pointerEvents="none";
    b.style.background="#181818";
    b.style.color="#444";
  }
}
['streetNo','streetName','suburb','state','postcode','country'].forEach(id=>{
  document.getElementById(id).addEventListener('input',checkShippingFields);
  document.getElementById(id).addEventListener('change',checkShippingFields);
});
setTimeout(checkShippingFields,500);

function x(a,c,s,i){
  return btoa(a+"-"+c+"-"+s)==i
}

// Generate a simple order ID (timestamp-based, for example)
function generateOrderId() {
  return 'POIZONE-' + Date.now();
}

// FULL EMAIL + PAYPAL HANDLER
document.getElementById('paypalBtn').addEventListener('click',function(){
  if(this.style.pointerEvents==="none")return;
  const c=countrySelect.value,
        t=basePrice+shippingPrice+getAddedItemsPrice(),
        v=this.getAttribute('data-v'),
        s=addedItems.map(i=>i.product+i.count+i.size).join("");
  if(!x(t,c,s,v)){
    alert("Order error, please refresh.");
    return;
  }

  // Update hidden fields
  updateExtrasField();
  document.getElementById('orderTotalField').value = t;
  document.getElementById('orderShippingField').value = shippingPrice;
  let orderId = generateOrderId();
  document.getElementById('orderIdField').value = orderId;

  // EmailJS send
  emailjs.sendForm(
    'service_7y7feqr',
    'template_i94jxe9',
    document.getElementById('orderForm')
  ).then(function(response) {
    alert('Order submitted! You will be redirected to PayPal.');
    let paypalLink=`https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=michaelryan2000@live.com.au&currency_code=USD&amount=${t}&item_name=POIZONE%20CLASSIC%20(+extras)&shipping=${shippingPrice}`;
    window.open(paypalLink,'_blank');
  }, function(error) {
    alert('Failed to send order email.\n\n' + (error.text || JSON.stringify(error)));
    console.error(error);
  });
});

document.getElementById('orderForm').addEventListener('submit',function(e){e.preventDefault();});
updatePrice();
(function(){
  const t=document.getElementById('scrollTileBar'),n=document.getElementById('tileContent'),e=document.getElementById('tileEditable');
  function i(){
    while(n.children.length>1)n.removeChild(n.lastChild);
    const r=e.innerText||e.textContent||'';
    const c=Math.ceil(window.innerWidth/e.offsetWidth)*3+2;
    for(let u=1;u<c;u++){
      let a=e.cloneNode(true);
      a.contentEditable="false";
      a.removeAttribute("id");
      a.classList.remove('editable-text');
      n.appendChild(a);
    }
    const l=n.scrollWidth;
    let d=Math.max(6,l/180);
    n.style.animationDuration=d+'s';
  }
  e.addEventListener('input',i);
  window.addEventListener('resize',i);
  e.addEventListener('keydown',function(r){if(r.key==="Enter"){r.preventDefault();}});
  setTimeout(i,100);
})();
window.removeItem=removeItem;
</script>
</body>
</html>